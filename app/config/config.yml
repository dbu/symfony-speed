imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

framework:
    #esi:             ~
    #translator:      { fallback: %locale% }
    secret:          %secret%
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:
        engines: ['twig']
        assets_version: v1
    default_locale:  %locale%
    session: ~
    esi:
        enabled: true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    # simulate that we can not cache anything because we need to calculate fresh
    cache: false

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ DbuCoreBundle ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #yui_css:
        #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar

pminnieur_sprites:
    defaults:
        selector: ".{{filename}}{background-position:-{{pointer}}px 0px}"
    spritesets:
        sprites:
            sources: "%kernel.root_dir%/../src/Dbu/Bundle/CoreBundle/Resources/sprites/"
            image: "%kernel.root_dir%/../web/assets/images/sprites.png"
            stylesheet: "%kernel.root_dir%/cache/dev/sprites/sprites.css"

liip_cache_control:
    rules:
        # Make sure login and logout are not cached at all
        - { path: ^/(login|login_check|logout), controls: {private: true, max_age: 0}}
        # Cache the homepage for 10 minutes
        - { path: ^/$, reverse_proxy_ttl: 3600, controls: { public: true, max_age: 600, last_modified: "-1 hour" } }
        # Cache every other page that has not an _internal route for 1 hour
        - { path: ^/[^_], reverse_proxy_ttl: 3600, controls: { public: true, max_age: 3600, last_modified: "-1 hour" } }
    varnish:
        domain: http://performance.lo
        ips: 127.0.0.1 # comma separated list of ips, or an array of ips
        port: 6081  # port varnish is listening on for incoming web connections
